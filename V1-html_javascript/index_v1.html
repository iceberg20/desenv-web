<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>Todo List</title>
  </head>
  <body >

  <div style="background-color:Crimson">
    <h3 style="color:white">Todo List</h3>
  </div>

  <table  border="1" border-collapse="collapse" style="width:35%">
  <thead>
    <tr>
      <th colspan="1" align="left"">A fazer</th>
      <th colspan="1" align="left"">Finalizar Tarefa</th>
      <th colspan="2" align="left""></th>
    </tr>
  </thead>
    <tbody id="todoTableBody">
    </tbody>
</table>


  </br>

  <table  border="1" border-collapse="collapse" style="width:35%">
    <thead>
      <tr>
        <th colspan="3" align="left">Feito</th>
      </tr>
    </thead>
    <tbody id="todoTableBodyFeito">
    </tbody>
  <tr>

</table>

<div id="debug"> </div>

<script>
  var t_fazer = [];
  var t_feita = [];

desenharTabela();

var id = 10;
function id_increment(){
  id+=1;
}
function id_generate(){
  return id+=1;
}  

   
  // Retina lista de tarefas a fazer
  function tarefas_fazer(){
    var tarefas = []; 

    for (i = 0; i < 1; i++) {
      tarefas[i] = {id: i+1, nome: "Estudar" + i, situacao: false};
    }

    return tarefas;
  }

  // Utils
  function mostrarListaTarefas(lista){
    document.getElementById("debug").innerHTML += "</br>";
    for (i = 0; i < lista.length; i++) {
      document.getElementById("debug").innerHTML +=  lista[i].id + " " +lista[i].nome+ " " + lista[i].situacao + "</br>";
    } 
  }

  mostrarListaTarefas(t_fazer);

  function addTarefa(){
    var t = document.getElementById("input_add").value;
    document.getElementById("debug").innerHTML = t;
    
    t_fazer.push({ id: id_generate(),nome: t, situacao: false});  
    desenharTabela();
    mostrarListaTarefas(t_fazer);

  }

  function desenharTabela() {
    document.getElementById("todoTableBody").innerHTML = "";
    var tabela = [];
    document.getElementById("debug").innerHTML = t_fazer.length;
    for (i = 0; i < t_fazer.length; i++) {

        tabela.push("<tr id=r"+i+">");
        
            tabela.push("<td>" + t_fazer[i].nome + "</td>");
            tabela.push("<td><td><img id="+i+" src='done.jpg' height='20' width='20' onclick='finaliza_tarefa(this.id)'></td>");
            tabela.push("<td><img src='delete.jpg' height='20' width='20'></td>");
            tabela.push("<td><img src='edit.jpg' height='20' width='20'></td>");
            
             

        tabela.push("</tr>");
      }

        tabela.push("<tr>");
          tabela.push("<td colspan='2'><input id='input_add' type='text' name='lname'></td>");
          tabela.push("<td><img src='add.jpg' height='20' width='20' onclick='addTarefa()'></td>");
        tabela.push("</tr>");
    
    document.getElementById("todoTableBody").innerHTML = tabela.join("");
}

  function desenharTabelaFeito() {
    document.getElementById("todoTableBodyFeito").innerHTML = "";

    
    var tabelaFeito = [];
    document.getElementById("debug").innerHTML = t_feita.length;
    for (i = 0; i < t_feita.length; i++) {

        tabelaFeito.push("<tr id=rf"+i+">");
        
            tabelaFeito.push("<td>" + t_feita[i].nome + "</td>");
            tabelaFeito.push("<td><td><img id=i"+i+" src='done.jpg' height='20' width='20' onclick='finaliza_tarefa(this.id)'></td>");
            tabelaFeito.push("<td><img src='delete.jpg' height='20' width='20'></td>");
            tabelaFeito.push("<td><img src='edit.jpg' height='20' width='20'></td>");

        tabelaFeito.push("</tr>");
      }

        tabelaFeito.push("<tr>");
          tabelaFeito.push("<td colspan='2'><input id='input_add' type='text' name='lname'></td>");
          tabelaFeito.push("<td><img src='add.jpg' height='20' width='20' onclick='addTarefa()'></td>");
        tabelaFeito.push("</tr>");
    
    document.getElementById("todoTableBodyFeito").innerHTML = tabelaFeito.join("");
}


function finaliza_tarefa(t_id){
   document.getElementById("debug").innerHTML = t_id;
  // document.getElementById("r"+t_id).innerHTML = "";
 //  document.getElementById("rf"+t_id).innerHTML = "";

  //Remove da lista
  t_fazer.splice(t_id, 1);
  

  //Adiciona na lista de feitos
  t_feita.push({id: t_id, nome: "Estudar", situacao: false});
  mostrarListaTarefas(t_feita);

 desenharTabelaFeito(t_feita);
  console.log(t_feita);
  //desenharTabela(t_fazer);


  //t_fazer.indexOf(elem);

}







    //  var tarefa = new Tarefa('Estudar', true);
     // alert(tarefa.feito);




// function myFunction() {
//   // Get the checkbox
//   var checkBox = document.getElementById("myCheck");
//   // Get the output text
//   var elemento = document.getElementById("tarefa");

//   // If the checkbox is checked, display the output text
//   if (checkBox.checked == true){
//     elemento.style.display = "none";
//   } 
// }


</script>

</body>
</html>
