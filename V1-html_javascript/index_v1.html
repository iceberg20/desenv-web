
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title >Todo List</title>
  </head>
  <body >

  <div style="background-color:Crimson">
    <h3 style="color:white">Todo List</h3>
  </div>
                <table id="todoTable" border="1" border-collapse="collapse" style="width:60%">
                <h3> Tarefas </h3>
            <thead>
                <tr>
                    <th>Situação</th>
                    <th>Descricão</th>
                    <th>Atribuição</th>
                    <th>Prazo</th>
                    <th><img src="edit.jpg" alt="Smiley face" height="20" width="20"></th>
                    <th><img src="delete.jpg" alt="Smiley face" height="20" width="20"></th>                    
                </tr>
            </thead>

            <tbody id="tarefasTableBody">
            </tbody>
        </table>

        <br />
                <h3> Adicionar </h3>
         

         
                <label for="descricao">Descrição:</label>
                <input type="text" id="descricao" />
                                <td><label for="atribuicao">Atribuição:</label></td>
                <input type="text" id="atribuicao" />
     
                <label for="prazo">Prazo:</label>
                <input type="date" id="prazo" /> 
      
                <button onclick="adicionarTarefa()">Adicionar Tarefa</button>






        <script>
            var listaDeTarefas = new Array;


                drawTable();
   



            function drawTable() {
                document.getElementById('tarefasTableBody').innerHTML = '';

                var tabela = [];

                for (i = 0; i < listaDeTarefas.length; i++) {
                    tabela.push('<tr>');

                    if (!listaDeTarefas[i].terminada && !listaDeTarefas[i].atualiza) {
                        tabela.push('<td><input type="checkbox" value="' + i + '" onclick="completarTarefa()"></td>');
                        tabela.push('<td>' + listaDeTarefas[i].descricao + '</td>');
                        tabela.push('<td>' + listaDeTarefas[i].atribuicao + '</td>');
                        tabela.push('<td>' + formatarData(listaDeTarefas[i].prazo) + '</td>');
                    } else if (listaDeTarefas[i].atualiza) {
                        if (listaDeTarefas[i].terminada) {
                            tabela.push('<td><input id="alteraTerminada" type="checkbox" value="' + i + '" onclick="" checked></td>');
                        } else {
                            tabela.push('<td><input id="alteraTerminada" type="checkbox" value="' + i + '" onclick=""></td>');
                        }
                        tabela.push('<td><input id="alteraDescricao" type="text" value="' + listaDeTarefas[i].descricao + '"></td>');
                        tabela.push('<td><input id="alteraAtribuicao" type="text" value="' + listaDeTarefas[i].atribuicao + '"></td>');
                        tabela.push('<td><input id="alteraPrazo" type="date" value="' + listaDeTarefas[i].prazo + '"></td>');
                        tabela.push('<td><button value="' + i + '" onclick="alterarTarefa()">Alterar</button></td>');
                        tabela.push('<td><button value="' + i + '" onclick="cancelarEditarTarefa()">Cancelar</button></td>');
                        tabela.push('</tr>');
                        continue;
                    } else {
                        tabela.push('<td><input type="checkbox" value="' + i + '" onclick="completarTarefa()" checked></td>');
                        tabela.push('<td><strike>' + listaDeTarefas[i].descricao + '</strike></td>');
                        tabela.push('<td><strike>' + listaDeTarefas[i].atribuicao + '</strike></td>');
                        tabela.push('<td><strike>' + formatarData(listaDeTarefas[i].prazo) + '</strike></td>');
                    }

                    tabela.push('<td><button value="' + i + '" onclick="marcaEditarTarefa()">Editar</button></td>');
                    tabela.push('<td><button value="' + i + '" onclick="deletarTarefa()">Apagar</button></td>');
                    tabela.push('</tr>');
                }
                document.getElementById('tarefasTableBody').innerHTML = tabela.join('');
            }

            function adicionarTarefa() {
                listaDeTarefas.push({
                    descricao: document.getElementById('descricao').value,
                    prazo: document.getElementById('prazo').value,
                    atribuicao: document.getElementById('atribuicao').value,
                    terminada: false,
                    atualiza: false
                });

                document.getElementById('descricao').value = '';
                document.getElementById('prazo').value = '';
                document.getElementById('atribuicao').value = '';

                drawTable();
            }

            function deletarTarefa() {
                listaDeTarefas.splice(parseInt(event.srcElement.value), 1);

                drawTable();
            }

            function completarTarefa() {
                listaDeTarefas[parseInt(event.srcElement.value)].terminada = true;

                drawTable();
            }
            function marcaEditarTarefa() {
                listaDeTarefas[parseInt(event.srcElement.value)].atualiza = true;

                drawTable();
            }
            function cancelarEditarTarefa() {
                listaDeTarefas[parseInt(event.srcElement.value)].atualiza = false;

                drawTable();
            }

            function alterarTarefa() {
                var tarefa = listaDeTarefas[parseInt(event.srcElement.value)];

                tarefa.descricao = document.getElementById('alteraDescricao').value;
                tarefa.atribuicao = document.getElementById('alteraAtribuicao').value;
                tarefa.prazo = document.getElementById('alteraPrazo').value;

                if (document.getElementById('alteraTerminada').checked) {
                    tarefa.terminada = true;
                } else {
                    tarefa.terminada = false;
                }

                tarefa.atualiza = false;

                drawTable();
            }

            function formatarData(data) {
                var dataDividida = data.split("-");

                return dataDividida[2] + '/' + dataDividida[1] + '/' + dataDividida[0];
            }

        </script> 
    </body>
</html>

